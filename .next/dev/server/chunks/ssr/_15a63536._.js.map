{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jimmy/Desktop/nexus-os/components/PayWithPaystack.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState } from 'react';\nimport Script from 'next/script';\n\nexport default function PayWithPaystack({ \n  amount, \n  email, \n  planId, \n  onSuccess \n}: { \n  amount: number | string, // Accept string or number to be safe\n  email: string, \n  planId: string,\n  onSuccess?: () => void\n}) {\n  const publicKey = process.env.NEXT_PUBLIC_PAYSTACK_PUBLIC_KEY;\n  const [isScriptLoaded, setIsScriptLoaded] = useState(false);\n\n  const handleBuy = () => {\n    if (!isScriptLoaded) {\n      alert(\"Payment system loading... please wait.\");\n      return;\n    }\n    \n    if (!publicKey) {\n      alert(\"Payment Key missing!\");\n      return;\n    }\n\n    // FORCE CONVERSION: Ensure it is a number, multiply by 100, remove decimals.\n    // Example: 100.00 -> 10000 (Kobo)\n    const finalAmount = Math.ceil(Number(amount) * 100);\n\n    console.log(\"Processing Payment:\", { email, finalAmount, planId });\n\n    if (isNaN(finalAmount) || finalAmount <= 0) {\n      alert(\"Error: Invalid Price detected. Please contact support.\");\n      return;\n    }\n\n    // @ts-ignore\n    const handler = window.PaystackPop.setup({\n      key: publicKey,\n      email: email,\n      amount: finalAmount, // Send the clean integer\n      currency: \"KES\", // Explicitly set currency to avoid confusion\n      ref: (new Date()).getTime().toString(),\n      metadata: {\n        funnelId: planId,\n        custom_fields: []\n      },\n      callback: function(response: any) {\n        console.log(\"Payment Complete:\", response);\n        if (onSuccess) onSuccess();\n      },\n      onClose: function() {\n        console.log(\"Payment closed\");\n      }\n    });\n\n    handler.openIframe();\n  };\n\n  return (\n    <div className=\"w-full\">\n      <Script \n        src=\"https://js.paystack.co/v1/inline.js\" \n        onLoad={() => setIsScriptLoaded(true)}\n      />\n\n      <button \n        onClick={handleBuy}\n        disabled={!isScriptLoaded}\n        className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {isScriptLoaded ? \"Buy Now (Secure)\" : \"Loading...\"}\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,gBAAgB,EACtC,MAAM,EACN,KAAK,EACL,MAAM,EACN,SAAS,EAMV;IACC,MAAM;IACN,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,MAAM,YAAY;QAChB,IAAI,CAAC,gBAAgB;YACnB,MAAM;YACN;QACF;QAEA;;QAKA,6EAA6E;QAC7E,kCAAkC;QAClC,MAAM,cAAc,KAAK,IAAI,CAAC,OAAO,UAAU;QAE/C,QAAQ,GAAG,CAAC,uBAAuB;YAAE;YAAO;YAAa;QAAO;QAEhE,IAAI,MAAM,gBAAgB,eAAe,GAAG;YAC1C,MAAM;YACN;QACF;QAEA,aAAa;QACb,MAAM,UAAU,OAAO,WAAW,CAAC,KAAK,CAAC;YACvC,KAAK;YACL,OAAO;YACP,QAAQ;YACR,UAAU;YACV,KAAK,AAAC,IAAI,OAAQ,OAAO,GAAG,QAAQ;YACpC,UAAU;gBACR,UAAU;gBACV,eAAe,EAAE;YACnB;YACA,UAAU,SAAS,QAAa;gBAC9B,QAAQ,GAAG,CAAC,qBAAqB;gBACjC,IAAI,WAAW;YACjB;YACA,SAAS;gBACP,QAAQ,GAAG,CAAC;YACd;QACF;QAEA,QAAQ,UAAU;IACpB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,yIAAM;gBACL,KAAI;gBACJ,QAAQ,IAAM,kBAAkB;;;;;;0BAGlC,8OAAC;gBACC,SAAS;gBACT,UAAU,CAAC;gBACX,WAAU;0BAET,iBAAiB,qBAAqB;;;;;;;;;;;;AAI/C"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/jimmy/Desktop/nexus-os/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}